\documentclass[DM,lsstdraft,STR,toc]{lsstdoc}
\usepackage{geometry}
\usepackage{longtable,booktabs}
\usepackage{enumitem}
\usepackage{arydshln}

\input meta.tex

\providecommand{\tightlist}{
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\begin{document}

\def\milestoneName{Science Pipelines Fall 2019 Release}
\def\milestoneId{LDM-503-11b}
\def\product{Science Pipelines SW}

\setDocCompact{true}

\title{ LDM-503-11b Science Pipelines Fall 2019 Release Test Plan and Report}
\setDocRef{\lsstDocType-\lsstDocNum}
\date{\vcsdate}
\setDocUpstreamLocation{\url{https://github.com/lsst/lsst-texmf/examples}}
\author{ John Swinbank }

\input history_and_info.tex


\setDocAbstract{
This is the test plan and report for LDM-503-11b (Science Pipelines Fall 2019 Release), an LSST level 2 milestone pertaining to the Data Management Subsystem.
}


\maketitle

\section{Introduction}
\label{sect:intro}


\subsection{Objectives}
\label{sect:objectives}

This test plan checks for the successful release of the Fall 2019
release of the LSST Science Pipelines (Pipelines release version
19.0.0).\\[2\baselineskip]It will demonstrate that:\\[2\baselineskip]

\begin{itemize}
\tightlist
\item
  The release has been tagged, built and made available through standard
  distribution channels;
\item
  Release documentation, including release notes and a characterization
  report, are available on the LSST Pipelines documentation website
  (https://pipelines.lsst.io/);
\item
  An end-user can follow standard instructions to install the release
  onto some representative system;
\item
  The release is installed into the ``shared stack'' on the lsst-dev
  shared developer systems and the Verification Cluster at the LSST Data
  Facility;
\item
  The lsst\_dm\_stack\_demo test package executes successfully in the
  context of the release.
\end{itemize}

This test plan does not, in itself, verify the scientific integrity or
algorithmic correctness of the release, beyond checking that defined
procedures for checking basic correctness and characterizing algorithmic
performance have been followed.\\[2\baselineskip]

\subsection{Scope}\label{scope}

The overall strategy for testing and verification within LSST Data
Management is described in \citeds{LDM-503}.\\
This test plan specifically verifies successful completion of milestone
LDM-503-11b, which refers to the Fall 2019 release of the LSST Science
Pipelines.



\subsection{System Overview}
\label{sect:systemoverview}

The LSST Science Pipelines comprise the scientific algorithms that will
be used to process LSST data, arranged into executable pipelines by
means of the LSST ``task'' framework. They also include execution
middleware that is common across execution environments (for example,
the ``Data Butler'' I/O abstraction is included, but schedulers or
workflow management for specific clusters is not), and ``camera
packages'', which adapt and configure the algorithms for use with
specific instrumentation.\\[2\baselineskip]

\subsection{\texorpdfstring{Applicable Documents\\
}{Applicable Documents }}\label{applicable-documents}

\citeds{LDM-503} Data Management Test Plan\\
\citeds{LDM-151} Data Management Science Pipelines Design\\
\citeds{LSE-61} Data Management System Requirements


\subsection{Document Overview}
\label{sect:docoverview}

This document was generated from Jira, obtaining the relevant information from the 
\href{https://jira.lsstcorp.org/secure/Tests.jspa#/testPlan/LVV-P62}{LVV-P62}
~Jira Test Plan and related Test Cycles (
  \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCycle/LVV-C113}{LVV-C113}
).

Section \ref{sect:intro} provides an overview of the test campaign, the system under test (\product{}), the applicable documentation, and explains how this document is organized.
Section \ref{sect:configuration}  describes the configuration used for this test.
Section \ref{sect:personnel} describes the necessary roles and lists the individuals assigned to them.
%Section \ref{sect:plannedtestactivities} provides the list of planned test cycles and test cases, including all relevant information that fully describes the test campaign.

Section \ref{sect:overview} provides a summary of the test results, including an overview in Table \ref{table:summary}, an overall assessment statement and suggestions for possible improvements.
Section \ref{sect:detailedtestresults} provides detailed results for each step in each test case.

The current status of test plan LVV-P62 in Jira is \textbf{ Draft }.

\subsection{References}
\label{sect:references}
\renewcommand{\refname}{}
\bibliography{lsst,refs,books,refs_ads}
\section{Test Configuration}
\label{sect:configuration}

\subsection{Data Collection}

  Observing is not required for this test campaign.

\subsection{Verification Environment}
\label{sect:hwconf}
  Several of the tests described in this plan are agnostic of environment:
they involve checking that certain content has been properly published.
This can be performed from any internet-connected system with a web
browser, and will, in this case, likely be executed from the tester's
laptop.\\[2\baselineskip]Where tests require installation or execution
of specific Science Pipelines components, this will be carried out on
the ``lsst-dev'' shared developer infrastructure at the LSST Data
Facility. This infrastructure provides a number of powerful (high core
count, high RAM) systems accessible to LSST developers. At time of
writing, they are running CentOS 7.6.1810; in practice, any version of
CentOS (or a similar operating system) is appropriate for this test
plan, as long as it complies with the published installation
prerequisites of the LSST Science Pipelines.\\[2\baselineskip]





\newpage
\section{Personnel}
\label{sect:personnel}

The following personnel are involved in this test activity:

\begin{itemize}
\item Test Plan (LVV-P62) owner: John Swinbank
\item Test Cycles:
\begin{itemize}
  \item LVV-C113 owner: 
    John Swinbank
  \begin{itemize}
    \item Test case \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T362}{LVV-T362} tester: 
    \item Test case \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T1601}{LVV-T1601} tester: 
    \item Test case \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T363}{LVV-T363} tester: 
  \end{itemize}
\end{itemize}
\item Additional Test Personnel involved:
  \begin{itemize}
    \item Test case \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T362}{LVV-T362}: 
    \item Test case \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T363}{LVV-T363}: 
    \item Test case \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T1601}{LVV-T1601}: 
  \end{itemize}
\end{itemize}

\newpage

\section{Overview of the Test Results}
\label{sect:overview}

\subsection{Summary}
\label{sect:summarytable}

\begin{longtable}{p{0.12\textwidth}p{0.2\textwidth}p{0.56\textwidth}p{0.12\textwidth}}
\toprule

  \multicolumn{3}{c}{ Test Cycle {\bf LVV-C113: LDM-503-11b: Science Pipelines Fall 2019 Release
 }} \\\hline

  {\bf \footnotesize test case} & {\bf \footnotesize status} & {\bf \footnotesize comment} & {\bf \footnotesize issues} \\\toprule

    \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T362}{LVV-T362}
    & Not Executed &  &
    \\\hline
    \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T1601}{LVV-T1601}
    & Not Executed &  &
    \\\hline
    \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T363}{LVV-T363}
    & Not Executed &  &
    \\\hline

\caption{Test Results Summary}
\label{table:summary}
\end{longtable}

\subsection{Overall Assessment}
\label{sect:overallassessment}

Not yet available.

\subsection{Recommended Improvements}
\label{sect:recommendations}

Not yet available.

\newpage
\section{Detailed Test Results}
\label{sect:detailedtestresults}


  \subsection{Test Cycle LVV-C113 }

Open test cycle {\it \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testrun/LVV-C113}{LDM-503-11b: Science Pipelines Fall 2019 Release
}} in Jira.

  LDM-503-11b: Science Pipelines Fall 2019 Release
\\
  Status: Not Executed

  This test cycle describes tests performed on the Science Pipelines Fall
2019 (v19.0.0) release, ensuring that the release is properly
identified, documented, distributed, installable and tested.


  \subsubsection{Software Version/Baseline}
    A web browser is required for inspecting release artifacts published to
the web.\\[2\baselineskip]Testing the software installation procedures,
and demonstrating that the release's integration tests can be executed
successfully, require a supported operating system with the documented
prerequisites of the release installed. This will be carried out on the
''lsst-dev'' shared developer systems at the LSST Data
Facility.\\[2\baselineskip]At time of writing, Data Facilitysystems run
CentOS Linux release 7.6.1810, and it is anticipated that this will be a
supported platform for the Science Pipelines
release.\\[2\baselineskip]Science Pipelines prerequisites are currently
documented at https://pipelines.lsst.io/install/prereqs/centos.html and
all of these must be installed.\\[2\baselineskip]It is possible that the
software release will involve a reorganization of documentation
describing prerequisites; in this case, the documentation corresponding
to the new release must be consulted.


  \subsubsection{Configuration}
    No specific configuration is required beyond the availability of test
systems with the prerequisite software, described above, installed.


  \subsubsection{Test Cases in LVV-C113 Test Cycle}


    \paragraph{Test Case LVV-T362 - Installation of the LSST Science Pipelines Payloads
 }\mbox{}\\

Open  \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T362}{\textit{ LVV-T362 } }
test case in Jira.

    This test will check that:

\begin{itemize}
\tightlist
\item
  The Alert Production Pipeline payload is available for installation
  from documented channels;
\item
  The Data Release Production Pipeline payload is available for
  installation from documented channels;
\item
  The Calibration Products Production Pipeline payload is available for
  installation from documented channels;
\item
  These payloads can be installed on systems at the LSST Data Facility
  following available documentation;
\item
  The installed pipeline payloads are capable of successfully executing
  basic integration tests.
\end{itemize}

Note that this test assumes a 2018-era packaging of the Science
Pipelines software, in which all the above payloads are represented by a
single ``meta-package'', lsst\_distrib.


    \textbf{ Preconditions}:\\
    

    Execution status: {\bf Not Executed }

    Final comment:\\


    Detailed step results:

    \begin{longtable}{p{1cm}p{2cm}p{13cm}}
    \hline
    {Step} & \multicolumn{2}{c}{Description, Results and Status}\\ \hline
      1 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      The LSST Science Pipelines, described by the lsst\_distrib meta-package,
should be installed following the documentation available at
https://pipelines.lsst.io/. The suggested Conda environment will be used
to ensure that a supported execution environment is available.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      Detailed output will depend on the installation method chosen, but will
confirm the successful installation of the Science Pipelines.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      2 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      The lsst\_distrib top-level metapackage will be enabled. Assuming that
the software has been installed at
\$\{LSST\_DIR\}:\\[2\baselineskip]\hspace*{0.333em} ~ ~ ~source
\$\{LSST\_DIR\}/loadLSST.bash\\
\hspace*{0.333em} ~ ~ ~setup lsst\_distrib

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      Nothing is printed. The command\\[2\baselineskip]\hspace*{0.333em} ~eups
list -s lsst\_distrib\\[2\baselineskip]may be used to confirm that the
correct version of the codebase has been installed.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      3 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      The ``LSST Stack Demo'' package will be downloaded onto the test system
from https://github.com/lsst/lsst\_dm\_stack\_demo/releases. The version
corresponding to to the version of the Science Pipelines under test
should be chosen.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      Depends on the tool selected by the user for downloading.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      4 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      The stack demo package is uncompressed into a directory \$\{DEMO\_DIR\}.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      Depends on options given to the tar command. Should confirm the
availability of the stack demo source.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      5 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      The demo package will be executed by following the instructions in its
README file.~

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      Successful execution will result in the string ``Ok'' being returned.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

    \end{longtable}


    \paragraph{Test Case LVV-T1601 - Science Pipelines available on developer hardware
 }\mbox{}\\

Open  \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T1601}{\textit{ LVV-T1601 } }
test case in Jira.

    This test will check that a given release of the LSST Science Pipelines
is available for use in a ``shared stack'' on developer infrastructure.


    \textbf{ Preconditions}:\\
    

    Execution status: {\bf Not Executed }

    Final comment:\\


    Detailed step results:

    \begin{longtable}{p{1cm}p{2cm}p{13cm}}
    \hline
    {Step} & \multicolumn{2}{c}{Description, Results and Status}\\ \hline
      1 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Consult the LSST Developer Guide (http://developer.lsst.io/) to
establish:\\[2\baselineskip]

\begin{itemize}
\tightlist
\item
  An appropriate hostname and login instructions for the shared
  developer infrastructure at the LSST Data Facility;
\item
  Instructions for initializing the shared stack on the developer
  infrastructure.
\end{itemize}

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The Developer Guide clearly presents information about connecting to and
using shared infrastructure.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      2 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Connect to the shared infrastructure following the Developer Guide
instructions.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      A shell prompt on a shared machine.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      3 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Initialize the LSST environment following the Developer Guide
instructions.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      No errors are shown.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      4 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      List available software products using EUPS, and check that the release
under test is available.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The provided version number should be available in the shared stack.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

    \end{longtable}


    \paragraph{Test Case LVV-T363 - Science Pipelines Release Documentation
 }\mbox{}\\

Open  \href{https://jira.lsstcorp.org/secure/Tests.jspa#/testCase/LVV-T363}{\textit{ LVV-T363 } }
test case in Jira.

    This test will check:

\begin{itemize}
\tightlist
\item
  That a particular Science Pipelines release is adequately described by
  documentation at the https://pipelines.lsst.io/ site;
\item
  That the Science Pipelines release is accompanied by a
  characterization report which describes its scientific performance.
\end{itemize}


    \textbf{ Preconditions}:\\
    

    Execution status: {\bf Not Executed }

    Final comment:\\


    Detailed step results:

    \begin{longtable}{p{1cm}p{2cm}p{13cm}}
    \hline
    {Step} & \multicolumn{2}{c}{Description, Results and Status}\\ \hline
      1 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Load the Science Pipelines website at https://pipelines.lsst.io/.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The website is displayed.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      2 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Identify documentation for the release under test. This should be
clearly labelled on the documentation site.\\[2\baselineskip]If the
latest release is being tested, the default page loaded when visiting
https://pipelines.lsst.io/ should be the documentation
required.\\[2\baselineskip]If this test is for another release, the site
should present clear instructions for changing the edition (or version)
of the documentation being examined, and documentation for the release
under test should be available.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The documentation for the release under test is displayed.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      3 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Inspect the documentation to ensure that it refers to the release under
test, and that it provides:

\begin{itemize}
\tightlist
\item
  Release notes, describing changes in this release relative to the
  previous;
\item
  Installation instructions, together with a list of supported platforms
  and prerequisites;
\item
  Getting started information.
\end{itemize}

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The user is satisfied that the required information is available.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      4 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Locate the Characterization Metric Report corresponding to this release.
It should be linked from the main release documentation.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The user is satisfied that the report is available.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

      5 & Description &

      \begin{minipage}[t]{13cm}{\footnotesize
      Verify that the characterization metric report describes the scientific
performance of the release in terms of metrics referring to high-level
requirements documentation (the Science Requirements Document, LPM-17;
the LSST System Requirements, LSE-29; and/or the Observatory System
Specifications, LSE-30).

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Expected Result &

      \begin{minipage}[t]{13cm}{\footnotesize
      The user is satisfied with the contents of the report.

      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}

      & \begin{minipage}[t]{2cm}{Actual\\ Result}\end{minipage}   & 
      \begin{minipage}[t]{13cm}{\footnotesize
      
      \vspace{\dp0}
      } \end{minipage} \\
      \\ \cdashline{2-3}


      & Status          & Not Executed \\ \hline

    \end{longtable}


\input{appendix.tex}
\end{document}
